import "./shim.js";
import { App } from "astro/app";
const clientAddressSymbol = Symbol.for("astro.clientAddress");
function createExports(manifest) {
  const app = new App(manifest);
  const handler = async (request) => {
    const routeData = app.match(request);
    Reflect.set(request, clientAddressSymbol, request.headers.get("x-forwarded-for"));
    const response = await app.render(request, routeData);
    if (app.setCookieHeaders) {
      for (const setCookieHeader of app.setCookieHeaders(response)) {
        response.headers.append("Set-Cookie", setCookieHeader);
      }
    }
    return response;
  };
  return { default: handler };
}
export {
  createExports
};
